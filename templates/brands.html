{% extends "base.html" %}

{% block title %}Марки автомобилей - AutoPoizon{% endblock %}

{% block content %}
<div class="container">
    <div class="breadcrumbs">
        <a href="{{ url_for('index') }}">Главная</a>
        <span class="separator">></span>
        <span>Марки автомобилей</span>
    </div>
    
    <h1 class="page-title">Китайские автомобильные марки</h1>
    
    <!-- Унифицированная поисковая строка -->
    <div class="unified-search">
        <div class="unified-search-box">
            <input type="text" class="unified-search-input" 
                   placeholder="Поиск по марке автомобиля">
            <button class="unified-search-button">
                <i class="fas fa-search"></i>
                Найти
            </button>
        </div>
        
        <div class="unified-search-examples">
            Введите название марки для быстрого поиска
        </div>
    </div>
    
    <div class="brands-grid">
        {% for brand in brands %}
        <div class="brand-card" data-brand-id="{{ brand.id }}">
            <div class="brand-logo">
                <img src="{{ url_for('static', filename='images/brands/' + brand.logo) }}" alt="{{ brand.name }}" onerror="this.src='https://via.placeholder.com/100x60?text={{ brand.name }}'">
            </div>
            <div class="brand-name">{{ brand.name }}</div>
            <div class="brand-description">{{ brand.description }}</div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const searchInput = document.querySelector('.unified-search-input');
        const searchButton = document.querySelector('.unified-search-button');
        const brandCards = document.querySelectorAll('.brand-card');
        
        // Быстрый поиск по маркам
        searchInput.addEventListener('input', function() {
            const query = this.value.toLowerCase().trim();
            
            brandCards.forEach(card => {
                const brandName = card.querySelector('.brand-name').textContent.toLowerCase();
                const brandDesc = card.querySelector('.brand-description').textContent.toLowerCase();
                
                if (brandName.includes(query) || brandDesc.includes(query)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        });
        
        searchButton.addEventListener('click', function() {
            const query = searchInput.value.trim();
            if (query) {
                // Фокусируемся на поиске
                searchInput.focus();
            }
        });
        
        searchInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchButton.click();
            }
        });
        
        // Обработка клика по брендам
        brandCards.forEach(card => {
            card.addEventListener('click', function() {
                const brandId = this.getAttribute('data-brand-id');
                window.location.href = "/brand/" + brandId;
            });
        });
    });
</script>
{% endblock %}